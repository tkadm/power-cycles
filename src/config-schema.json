{
    "$schema": "http://json-schema.org/draft-04/schema",
    "title": "Power cycles info",
    "type": "object",
    "properties": {
        "$schema": {
            "type": "string"
        },
        "exercises": {
            "type": "object",
            "patternProperties": {
                "^[а-яА-Яa-zA-Z0-9_-]+$": {
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "description": "Список названий упражнений и их сокращений"
        },
        "algorithms": {
            "type": "object",
            "patternProperties": {
                "^\\w+$": {
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [
                                "linear"
                            ],
                            "description": "Тип алгоритма (линейны)"
                        },
                        "step_value_type": {
                            "type": "string",
                            "enum": [
                                "absolute",
                                "procent"
                            ],
                            "description": "Каким образом вычисляется шаг увеличения веса"
                        }
                    },
                    "additionalProperties": false,
                    "required": [
                        "type",
                        "step_value_type"
                    ]
                }
            },
            "additionalProperties": false,
            "description": "Список алгоритмов расчет цикла"
        },
        "users": {
            "type": "object",
            "patternProperties": {
                "^\\w+$": {
                    "type": "object",
                    "properties": {
                        "caption": {
                            "type": "string",
                            "description": "Имя атлета"
                        },
                        "body_weights": {
                            "type": "object",
                            "patternProperties": {
                                "^(0?[1-9]|[12][0-9]|3[01])\\.(0?[1-9]|1[012])\\.((19|20)\\d\\d)": {
                                    "type": "number",
                                    "description": "Вес в кг"
                                }
                            },
                            "additionalProperties": false,
                            "description": "Вес тела атлета"
                        },
                        "max_results": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "exercise": {
                                        "type": "string",
                                        "description": "Условное имя упражнения"
                                    },
                                    "value": {
                                        "type": "number",
                                        "description": "Значение в кг."
                                    },
                                    "reps": {
                                        "type": "number",
                                        "description": "Количество повторений"
                                    },
                                    "date": {
                                        "type": "string",
                                        "pattern": "^(0?[1-9]|[12][0-9]|3[01])\\.(0?[1-9]|1[012])\\.((19|20)\\d\\d)",
                                        "description": "Дата достижения результата"
                                    }
                                },
                                "additionalProperties": false,
                                "required": [
                                    "exercise",
                                    "value",
                                    "reps",
                                    "date"
                                ]
                            },
                            "description": "Максимальные результаты выполнения упражнений"
                        },
                        "cycles": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "Название типа цикла"
                                    },
                                    "begin_date": {
                                        "type": "string",
                                        "pattern": "^(0?[1-9]|[12][0-9]|3[01])\\.(0?[1-9]|1[012])\\.((19|20)\\d\\d)",
                                        "description": "Дата начала цикла"
                                    },
                                    "weeks_length": {
                                        "type": "number",
                                        "description": "Длина цикла в неделях"
                                    },
                                    "prev_max_week_num": {
                                        "type": "number",
                                        "description": "Номер недели цикла выхода на пик силы предыдущего цикла"
                                    },
                                    "exercises": {
                                        "type": "object",
                                        "patternProperties": {
                                            "^[а-яА-Яa-zA-Z0-9_-]+$": {
                                                "type": "object",
                                                "properties": {
                                                    "weight": {
                                                        "type": "number",
                                                        "description": "Базовый вес упражнения"
                                                    },
                                                    "algorithm": {
                                                        "type": "string",
                                                        "pattern": "^\\w+$",
                                                        "description": "Вид расчета (по абсолютному значению, по проценту от веса)"
                                                    },
                                                    "factor": {
                                                        "type": "number",
                                                        "description": "Параметр расчета"
                                                    }
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                    "weight",
                                                    "algorithm",
                                                    "factor"
                                                ]
                                            }
                                        },
                                        "additionalProperties": false,
                                        "description": "Список участвующих упражнений и описание алгоритма расчета цикла"
                                    }
                                },
                                "additionalProperties": false,
                                "description": "Силовой цикл"
                            },
                            "description": "Циклы"
                        }
                    },
                    "additionalProperties": false,
                    "required": [
                        "max_results"
                    ]
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false,
    "required": [
        "algorithms",
        "users"
    ]
}